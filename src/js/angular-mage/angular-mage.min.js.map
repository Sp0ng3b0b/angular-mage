{"version":3,"file":"angular-mage.min.js","sources":["mage.module.js","customer/customer.module.js","model/model.module.js","price/price.module.js","session/session.module.js","translator/translator.module.js","url/url.module.js","customer/currentCustomer.service.js","model/model.factory.js","price/price.directive.js","price/priceFormat.filter.js","price/priceFormat.service.js","translator/translator.filter.js","translator/translator.service.js","url/url.service.js"],"names":[],"mappings":"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","sourcesContent":["(function(){\n    angular\n        .module('mage', [\n            'mage.url',\n            'mage.model',\n            'mage.customer',\n            'mage.price',\n            'mage.translator',\n            'mage.session'\n        ]);\n})();\n\n","(function(){\n    'use strict';\n\n    angular\n        .module('mage.customer', ['mage.url', 'mage.session']);\n})();","(function(){\n    'use strict';\n\n    angular\n        .module('mage.model', ['mage.url', 'mage.session']);\n})();","(function(){\n    'use strict';\n\n    angular\n        .module('mage.price', []);\n})();","(function(){\n    'use strict';\n\n    angular\n        .module('mage.session', [])\n        .run(initSession)\n    ;\n\n    initSession.$inject = ['$http', 'authToken'];\n\n    function initSession($http, authToken) {\n        //Set AuthToken for Requests\n        $http.defaults.headers.common['Mage-Auth-Token'] = authToken;\n    }\n\n})();","(function(){\n    'use strict';\n\n    angular\n        .module('mage.translator', [])\n    ;\n})();","(function(){\n    'use strict';\n\n    angular\n        .module('mage.url', []);\n})();\n\n","(function(){\n    'use strict';\n\n    angular\n        .module('mage.customer')\n        .service('mageCurrentCustomer', mageCurrentCustomer);\n\n    mageCurrentCustomer.$inject = ['$http', 'customerLoggedIn', 'mageUrl'];\n\n    function mageCurrentCustomer($http, customerLoggedIn, mageUrl){\n        this.getCurrentCustomer = getCurrentCustomer;\n        this.isLoggedIn = isLoggedIn;\n        this.getLoginUrl = getLoginUrl;\n        this.getLogoutUrl = getLogoutUrl;\n\n\n        function getCurrentCustomer() {\n            var url = mageUrl.getUrl('angular/customer/currentCustomer');\n\n            return $http.get(url, {cache: true})\n                .then(onComplete)\n                .catch(onError);\n\n\n            function onComplete(data, status, headers, config) {\n                return data.data;\n            }\n\n            function onError(error) {\n                console.log(\"Error: \"+ error);\n            }\n        }\n\n        function isLoggedIn(){\n            return customerLoggedIn;\n        }\n\n        function getLoginUrl () {\n            return mageUrl.getUrl('customer/account/login');\n        }\n\n        function getLogoutUrl() {\n            return mageUrl.getUrl('customer/account/login');\n        }\n    }\n})();","(function(){\n    'use strict';\n\n    angular\n        .module('mage.model')\n        .factory('mageModel', modelFactory)\n    ;\n\n    modelFactory.$inject = ['$http','mageUrl'];\n\n    function modelFactory($http, mageUrl) {\n        return {\n            getModel: getModel,\n            getCollection: getCollection\n        };\n\n        function getModel(model, id, field) {\n\n            var params = {'class': model, 'id': id};\n            if(field) {\n                params['field'] = field;\n            }\n            var url = mageUrl.getUrl('angular/model/model', params);\n            return $http.get(url)\n                .then(onComplete)\n                .catch(onError);\n\n\n            function onComplete(data, status, headers, config) {\n                return data.data;\n            }\n\n            function onError(error) {\n                console.log(\"Error: \"+ error);\n            }\n        }\n\n        function getCollection(model, filters, select, limit, page) {\n\n            var params = {'class': model};\n\n            if(filters) { params['filters'] = filters; }\n            if(select)  { params['select'] = select; }\n            if(limit)   { params['limit'] = parseInt(limit); }\n            if(page)   { params['page'] = parseInt(page); }\n\n            var url = mageUrl.getUrl('angular/model/collection', params);\n\n            return $http.get(url)\n                .then(onComplete)\n                .catch(onError);\n\n\n            function onComplete(data, status, headers, config) {\n                return data.data;\n            }\n\n            function onError(error) {\n                console.log(\"Error: \"+ error);\n            }\n\n        }\n    }\n\n\n})();","(function(){\n    'use strict';\n    angular\n        .module('mage.price')\n        .directive('magePrice', magePrice)\n    ;\n\n    magePrice.$inject = ['magePriceFormat'];\n\n    function magePrice() {\n        return  {\n            restrict: 'EA',\n            replace: true,\n            scope: {price: '=value'},\n            template: '<span class=\"price\">{{price | formatPrice}}</price>'\n        };\n\n    }\n})();","(function(){\n    'use strict';\n\n    angular\n        .module('mage.price')\n        .filter('formatPrice', priceFormatFilter)\n    ;\n\n    priceFormatFilter.$inject = ['magePriceFormat'];\n\n    function priceFormatFilter(magePriceFormat) {\n        return function(price) {\n            return magePriceFormat.formatPrice(parseFloat(price));\n        }\n    }\n})();","(function(){\n    'use strict';\n\n    angular\n        .module('mage.price')\n        .service('magePriceFormat', priceFormatService)\n    ;\n\n    priceFormatService.$inject = ['priceFormat'];\n\n    function priceFormatService(priceFormat) {\n        this.formatPrice = function(price) {\n            price = parseFloat(price);\n\n            return formatCurrency(price, priceFormat);\n        }\n    }\n})();","(function(){\n    'use strict';\n\n    angular\n        .module('mage.translator')\n        .filter('trans', translateFilter)\n    ;\n\n    translateFilter.$inject = ['mageTranslator'];\n\n    function translateFilter(mageTranslator) {\n        return function(str) {\n            return mageTranslator.translate(str);\n        }\n    }\n\n})();","(function(){\n    'use strict';\n\n    angular\n        .module('mage.translator')\n        .service('mageTranslator', mageTranslatorService)\n    ;\n\n    function mageTranslatorService(){\n        this.translate = function(str) {\n            return Translator.translate(str);\n        };\n        this.add = function(str, translation) {\n            Translator.add(str, translation);\n        };\n    }\n})();","(function(){\n    'use strict';\n\n    angular\n        .module('mage.url')\n        .service('mageUrl', mageUrlService)\n    ;\n    mageUrlService.$inject = ['baseUrl', 'skinUrl', 'mediaUrl', 'jsUrl', 'baseUrlSecure', 'skinUrlSecure', 'mediaUrlSecure', 'jsUrlSecure'];\n\n    function mageUrlService(\n        baseUrl,\n        skinUrl,\n        mediaUrl,\n        jsUrl,\n        baseUrlSecure,\n        skinUrlSecure,\n        mediaUrlSecure,\n        jsUrlSecure\n        ){\n        this.getUrl = function(path, params, secure) {\n            params = params || {};\n            return _getUrl(secure ? baseUrl : baseUrlSecure, path, params)\n        };\n        this.getSkinUrl = function(path, params, secure) {\n            params = params || {};\n            return _getUrl(secure ? skinUrl : skinUrlSecure, path, params)\n        };\n        this.getMediaUrl = function(path, params, secure) {\n            params = params || {};\n            return _getUrl(secure ? mediaUrl : mediaUrlSecure, path, params)\n        };\n        this.getJsUrl = function(path, params, secure) {\n            params = params || {};\n            return _getUrl(secure ? jsUrl : jsUrlSecure, path, params)\n        };\n\n        function _getUrl(baseUrl, path, params) {\n\n            path = path || \"\";\n\n            var url = baseUrl + path;\n            var query = queryBuilder(params);\n            if(query) {\n                url += \"?\"+query;\n            }\n            return url;\n        }\n    }\n\n    //Credit: https://gist.github.com/dgs700/4677933\n    function queryBuilder (a) {\n        var prefix, s, add, name, r20, output;\n        s = [];\n        r20 = /%20/g;\n        add = function (key, value) {\n            // If value is a function, invoke it and return its value\n            value = ( typeof value == 'function' ) ? value() : ( value == null ? \"\" : value );\n            s[ s.length ] = encodeURIComponent(key) + \"=\" + encodeURIComponent(value);\n        };\n        if (a instanceof Array) {\n            for (name in a) {\n                add(name, a[name]);\n            }\n        } else {\n            for (prefix in a) {\n                _buildParams(prefix, a[ prefix ], add);\n            }\n        }\n        output = s.join(\"&\").replace(r20, \"+\");\n        return output;\n    }\n    function _buildParams(prefix, obj, add) {\n        var name, i, l, rbracket;\n        rbracket = /\\[\\]$/;\n        if (obj instanceof Array) {\n            for (i = 0, l = obj.length; i < l; i++) {\n                if (rbracket.test(prefix)) {\n                    add(prefix, obj[i]);\n                } else {\n                    _buildParams(prefix + \"[\" + ( typeof obj[i] === \"object\" ? i : \"\" ) + \"]\", obj[i], add);\n                }\n            }\n        } else if (typeof obj == \"object\") {\n            // Serialize object item.\n            for (name in obj) {\n                _buildParams(prefix + \"[\" + name + \"]\", obj[ name ], add);\n            }\n        } else {\n            // Serialize scalar item.\n            add(prefix, obj);\n        }\n    }\n\n})();\n\n\n"],"sourceRoot":"/source/"}